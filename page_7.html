<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modelo 2 - Embeddings Técnicos</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Open+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <script src="https://d3js.org/d3.v7.min.js"></script>

    <style>
      body {
        width: 1280px;
        height: 720px;
        overflow: hidden;
        background: linear-gradient(135deg, #e0f2f1 0%, #eceff1 100%);
        font-family: "Open Sans", sans-serif;
        margin: 0;
        padding: 0;
      }

      .glass-panel {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(12px);
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.4);
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .title-gradient {
        background: linear-gradient(90deg, #19747e, #26a69a);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      /* Estilo para o Gráfico de Vetores */
      #vector-viz {
        width: 100%;
        height: 350px;
        position: relative;
      }

      .vector-line {
        stroke-width: 2;
        stroke-linecap: round;
      }
      .vector-dot {
        r: 6;
        stroke: white;
        stroke-width: 2;
      }
      .axis-line {
        stroke: #cbd5e1;
        stroke-width: 1;
        stroke-dasharray: 4;
      }
    </style>
  </head>
  <body class="p-10 flex flex-col relative">
    <div class="mb-6">
      <h1
        class="text-4xl font-extrabold font-montserrat title-gradient mb-2 py-2 leading-tight"
      >
        Modelo 2: Embeddings Técnicos
      </h1>
      <div class="flex items-center gap-4">
        <div class="w-24 h-2 bg-teal-600 rounded-full"></div>
        <span
          class="text-sm font-semibold text-gray-500 bg-white px-2 py-1 rounded shadow-sm"
        >
          Qwen/Qwen3-Embedding-0.6B
        </span>
      </div>
    </div>

    <div class="flex gap-8 h-full pb-8">
      <div class="w-1/3 flex flex-col gap-4">
        <div class="glass-panel p-6 justify-center">
          <div class="mb-6 text-center">
            <i class="fas fa-project-diagram text-6xl text-teal-600 mb-4"></i>
            <h2 class="text-xl font-bold text-gray-800">Análise Vetorial</h2>
          </div>

          <ul class="space-y-4">
            <li class="flex items-start">
              <i class="fas fa-check-circle text-teal-500 mt-1 mr-3"></i>
              <div>
                <strong class="text-gray-800">Input:</strong>
                <p class="text-gray-600 text-sm">
                  Estatísticas estruturais do repositório (frequência de PRs,
                  CI/CD).
                </p>
              </div>
            </li>
            <li class="flex items-start">
              <i class="fas fa-check-circle text-teal-500 mt-1 mr-3"></i>
              <div>
                <strong class="text-gray-800">Técnica:</strong>
                <p class="text-gray-600 text-sm">
                  Similaridade de Cosseno (0 a 1).
                </p>
              </div>
            </li>
            <li class="flex items-start">
              <i class="fas fa-check-circle text-teal-500 mt-1 mr-3"></i>
              <div>
                <strong class="text-gray-800">Objetivo:</strong>
                <p class="text-gray-600 text-sm">
                  Medir a distância matemática entre o projeto e as definições
                  teóricas.
                </p>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div class="w-2/3 glass-panel p-6 relative">
        <h3
          class="absolute top-6 left-6 text-gray-400 font-bold uppercase text-xs tracking-widest"
        >
          Simulação: Espaço Vetorial
        </h3>

        <div
          id="vector-viz"
          class="flex-grow flex items-center justify-center"
        ></div>

        <div class="mt-4 flex justify-between text-xs text-gray-500 px-4">
          <div class="flex items-center">
            <span class="w-3 h-3 rounded-full bg-teal-600 mr-2"></span>Projeto
            (AnythingLLM)
          </div>
          <div class="flex items-center">
            <span class="w-3 h-3 rounded-full bg-blue-500 mr-2"></span>GitHub
            Flow (Mais Próximo)
          </div>
          <div class="flex items-center">
            <span class="w-3 h-3 rounded-full bg-red-400 mr-2"></span>Gitflow
            (Distante)
          </div>
        </div>
      </div>
    </div>

    <div
      class="absolute bottom-6 right-10 text-gray-400 font-bold text-xl opacity-60"
    >
      07
    </div>

    <script>
      // Configuração D3.js para Visualização de Vetores
      const width = 700;
      const height = 400;
      const svg = d3
        .select("#vector-viz")
        .append("svg")
        .attr("width", "100%")
        .attr("height", "100%")
        .attr("viewBox", `0 0 ${width} ${height}`);

      const centerX = width / 2;
      const centerY = height - 50;
      const scale = 250; // Comprimento dos vetores

      // Dados dos Vetores (Simulação de Similaridade)
      const vectors = [
        { label: "Projeto", angle: -60, color: "#19747E", score: "Ref" }, // Vetor Referência
        { label: "GitHub Flow", angle: -55, color: "#4299e1", score: "0.68" }, // Muito perto
        { label: "Trunk-Based", angle: -40, color: "#9f7aea", score: "0.61" }, // Perto
        { label: "Gitflow", angle: -110, color: "#fc8181", score: "0.45" }, // Longe
      ];

      // Desenhar Eixos
      svg
        .append("line")
        .attr("x1", centerX)
        .attr("y1", centerY)
        .attr("x2", centerX)
        .attr("y2", 50)
        .attr("class", "axis-line"); // Y
      svg
        .append("line")
        .attr("x1", 50)
        .attr("y1", centerY)
        .attr("x2", width - 50)
        .attr("y2", centerY)
        .attr("class", "axis-line"); // X

      // Desenhar Vetores
      vectors.forEach((v, i) => {
        const rad = v.angle * (Math.PI / 180);
        const x2 = centerX + Math.cos(rad) * scale;
        const y2 = centerY + Math.sin(rad) * scale;

        // Linha do Vetor
        svg
          .append("line")
          .attr("x1", centerX)
          .attr("y1", centerY)
          .attr("x2", centerX) // Animação começa do zero
          .attr("y2", centerY)
          .attr("stroke", v.color)
          .attr("class", "vector-line")
          .attr("marker-end", `url(#arrow-${i})`)
          .transition()
          .duration(1500)
          .delay(i * 300)
          .attr("x2", x2)
          .attr("y2", y2);

        // Bolinha na ponta
        svg
          .append("circle")
          .attr("cx", x2)
          .attr("cy", y2)
          .attr("class", "vector-dot")
          .attr("fill", v.color)
          .attr("opacity", 0)
          .transition()
          .duration(500)
          .delay(1500 + i * 300)
          .attr("opacity", 1);

        // Label
        svg
          .append("text")
          .attr("x", x2)
          .attr("y", y2 - 15)
          .attr("text-anchor", "middle")
          .attr("font-weight", "bold")
          .attr("fill", v.color)
          .text(`${v.label} (${v.score})`)
          .attr("opacity", 0)
          .transition()
          .duration(500)
          .delay(1800 + i * 300)
          .attr("opacity", 1);

        // Marcador de seta (Definição)
        svg
          .append("defs")
          .append("marker")
          .attr("id", `arrow-${i}`)
          .attr("viewBox", "0 0 10 10")
          .attr("refX", 5)
          .attr("refY", 5)
          .attr("markerWidth", 6)
          .attr("markerHeight", 6)
          .attr("orient", "auto-start-reverse")
          .append("path")
          .attr("d", "M 0 0 L 10 5 L 0 10 z")
          .attr("fill", v.color);
      });

      // Arco de Similaridade (Exemplo visual entre Projeto e GitHub Flow)
      const arc = d3
        .arc()
        .innerRadius(50)
        .outerRadius(52)
        .startAngle(55 * (Math.PI / 180)) // Invertido pois D3 usa radianos clock-wise do topo
        .endAngle(60 * (Math.PI / 180));

      // Nota visual: O D3 trabalha com ângulos diferentes do sistema cartesiano padrão,
      // mas para visualização simples, as linhas retas acima funcionam bem.
    </script>
  </body>
</html>
